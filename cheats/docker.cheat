% docker

# run container
SHARED_FOLDER=/tmp/shared-docker-$(shell date +%Y%m%d_%H%M%S) && \
echo "You can exchange files with this containers on the directory $(SHARED_FOLDER) on the host and /shared on the container." && \
mkdir -p $(SHARED_FOLDER) && \
@docker run --rm -d --network bridge --mount type=bind,source=$(SHARED_FOLDER),target=/shared <container-name>

# copy container.id to the clipboard
docker ps | fzf | awk '{print $1}' | xclip -i -selection clipboard

# kill and remove container
export CONTAINER_ID=$(docker ps | fzf | awk '{print $1}') && docker kill $CONTAINER_ID && docker rm $CONTAINER_ID

# delete images
docker rmi $(docker images | grep <image-name> | awk '{print $3}' | uniq) -f

# get container ip address
export CONTAINER_ID=$(docker ps | fzf | awk '{print $1}') && docker inspect $CONTAINER_ID | jq '.[] | {(.Name) : [(.Config.ExposedPorts | keys),(.NetworkSettings.Networks | to_entries | map({(.key): .value.IPAddress}))]}'
